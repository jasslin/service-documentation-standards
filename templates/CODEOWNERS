# CODEOWNERS - Code Review Requirements
# 程式碼所有權 - 程式碼審查要求
#
# Purpose: Enforce mandatory review for infrastructure and deployment changes
# 目的：強制對基礎設施和部署變更進行審查
#
# How it works:
# - Changes to files matching these patterns REQUIRE approval from specified users
# - Pull requests CANNOT be merged without approval
# - This is enforced by GitHub branch protection rules
#
# 如何運作：
# - 符合這些模式的檔案變更需要指定用戶的批准
# - 拉取請求無法在沒有批准的情況下合併
# - 這由 GitHub 分支保護規則強制執行
#
# Setup:
# 1. Copy this file to .github/CODEOWNERS in your service repository
# 2. Replace @ezra-jasslin with actual GitHub username
# 3. Enable "Require review from Code Owners" in branch protection settings
#
# 設定：
# 1. 複製此檔案到你的服務儲存庫的 .github/CODEOWNERS
# 2. 將 @ezra-jasslin 替換為實際的 GitHub 用戶名
# 3. 在分支保護設定中啟用「需要程式碼所有者審查」

# ============================================
# Infrastructure & Deployment
# 基礎設施與部署
# ============================================
# These changes can break production and must be reviewed by infrastructure owner
# 這些變更可能破壞生產環境，必須由基礎設施負責人審查

# Docker & Container Configuration
docker-compose*.yml          @ezra-jasslin
Dockerfile*                  @ezra-jasslin
.dockerignore               @ezra-jasslin

# Environment Variables & Secrets
.env*                       @ezra-jasslin
*.env                       @ezra-jasslin
config/*.env                @ezra-jasslin
secrets/                    @ezra-jasslin

# Database Schema & Migrations
migrations/                 @ezra-jasslin
schema/                     @ezra-jasslin
**/migrations/             @ezra-jasslin
*.sql                      @ezra-jasslin
alembic/                   @ezra-jasslin
flyway/                    @ezra-jasslin

# Infrastructure as Code
terraform/                  @ezra-jasslin
*.tf                       @ezra-jasslin
*.tfvars                   @ezra-jasslin
k8s/                       @ezra-jasslin
helm/                      @ezra-jasslin
*.yaml                     @ezra-jasslin  # Kubernetes manifests
*.yml                      @ezra-jasslin  # Kubernetes manifests

# Deployment & Operations Scripts
scripts/deploy*.sh         @ezra-jasslin
scripts/rollback*.sh       @ezra-jasslin
scripts/backup*.sh         @ezra-jasslin
deploy/                    @ezra-jasslin
ops/                       @ezra-jasslin

# CI/CD Pipeline Configuration
.github/workflows/         @ezra-jasslin
.gitlab-ci.yml            @ezra-jasslin
.circleci/                @ezra-jasslin
Jenkinsfile               @ezra-jasslin
azure-pipelines.yml       @ezra-jasslin

# Nginx & Web Server Configuration
nginx.conf                 @ezra-jasslin
nginx/                     @ezra-jasslin
apache/                    @ezra-jasslin
*.nginx                    @ezra-jasslin

# System Configuration
systemd/                   @ezra-jasslin
supervisord.conf          @ezra-jasslin
crontab                   @ezra-jasslin

# ============================================
# Documentation (Deployment-related)
# 文檔（部署相關）
# ============================================
# These documents describe production systems and must be accurate
# 這些文檔描述生產系統，必須準確

docs/DEPLOY.md            @ezra-jasslin
docs/RESILIENCE.md        @ezra-jasslin
docs/ARCHITECTURE.md      @ezra-jasslin
docs/TEST_REPORT.md       @ezra-jasslin

# ============================================
# Dependency Management
# 依賴管理
# ============================================
# Dependency changes can introduce security vulnerabilities or version conflicts
# 依賴變更可能引入安全漏洞或版本衝突

package.json              @ezra-jasslin
package-lock.json         @ezra-jasslin
requirements.txt          @ezra-jasslin
Pipfile                   @ezra-jasslin
Pipfile.lock             @ezra-jasslin
go.mod                    @ezra-jasslin
go.sum                    @ezra-jasslin
Gemfile                   @ezra-jasslin
Gemfile.lock             @ezra-jasslin
composer.json            @ezra-jasslin
composer.lock            @ezra-jasslin

# ============================================
# Security & Access Control
# 安全與存取控制
# ============================================

.gitignore                @ezra-jasslin  # Prevent accidental secret commits
.dockerignore             @ezra-jasslin
.cursorignore             @ezra-jasslin

# ============================================
# Network & Service Configuration
# 網路與服務配置
# ============================================

traefik/                  @ezra-jasslin
caddy/                    @ezra-jasslin
haproxy/                  @ezra-jasslin
*.toml                    @ezra-jasslin  # Configuration files

# ============================================
# Notes for Maintainers
# 維護者注意事項
# ============================================
#
# Why these files require review:
# 為什麼這些檔案需要審查：
#
# 1. docker-compose.yml:
#    - Network naming conflicts can break multiple systems
#    - Missing restart: always causes manual intervention after reboot
#    - Incorrect volume mounts can cause data loss
#
# 2. .env files:
#    - Wrong environment variables can break production
#    - Secrets must not be committed to git
#    - Database connection strings must be correct
#
# 3. migrations/:
#    - Database schema changes are IRREVERSIBLE
#    - Must be tested thoroughly before production
#    - Can cause data loss if incorrect
#
# 4. CI/CD configs:
#    - Can bypass security checks if misconfigured
#    - Can deploy broken code to production
#    - Can leak secrets if not properly configured
#
# 5. Documentation:
#    - Incorrect documentation leads to operational failures
#    - Knowledge single-point-of-failure must be prevented
#    - Recovery procedures must be accurate
#
# Add your GitHub username after @ (replace @ezra-jasslin)
# Multiple reviewers: @user1 @user2 @team-name
# Teams: @organization/team-name
